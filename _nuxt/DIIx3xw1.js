import{c as y,f as g,g as w,S as u,n as h,p as n,t as s,u as l,x as S,y as d,z as m,s as b}from"./Bp6VosAm.js";import{i as r,r as D}from"./DXMov7Gx.js";import{a as I}from"./Dt0KXldn.js";const R=I([]),p=async()=>{try{const t=y(g,"design"),e=await w(t);R.value=e.docs.map(a=>({id:a.id,...a.data()})).sort((a,o)=>o.id.localeCompare(a.id))}catch(t){throw console.error("Error fetching design data:",t),t}},x=async(t,e)=>{if((await u.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",confirmButtonColor:"#ef4444",cancelButtonText:"Cancel"})).isConfirmed)try{const o=h(g,"design",t),i=n(s,`design/${e}`);await l(i);const c=n(s,`design/thumbnail_${e}`);await l(c),await S(o),await p(),r("Project Has Been Deleted",{theme:localStorage.getItem("theme")=="dark"?"dark":"auto",type:"success",position:"bottom-right",dangerouslyHTMLString:!0})}catch(o){r("Error deleting project, "+o,{theme:localStorage.getItem("theme")=="dark"?"dark":"auto",type:"error",position:"bottom-right",dangerouslyHTMLString:!0})}},B=async t=>{if(t)try{const e=t.name;console.log("Original File Name",e);const a=n(s,`design/${t.name}`),o=n(s,`design/thumbnail_${t.name}`),i=await D(t,480);await d(a,t);const c=await m(a);await d(o,i);const f=await m(o);await b(h(g,"design",new Date().toISOString()),{fileName:e,image:c,thumbnail:f}),p(),r("Image Succesfully Uploaded",{theme:localStorage.getItem("theme")=="dark"?"dark":"auto",type:"success",position:"bottom-right",dangerouslyHTMLString:!0})}catch(e){r("Error uploading image, "+e,{theme:localStorage.getItem("theme")=="dark"?"dark":"auto",type:"error",position:"bottom-right",dangerouslyHTMLString:!0})}else u.fire({icon:"error",title:"Oops...",text:"Please select an image to upload!"}),r("Oopss.., Please select an image to upload!",{theme:localStorage.getItem("theme")=="dark"?"dark":"auto",type:"error",position:"bottom-right",dangerouslyHTMLString:!0})};export{R as a,B as c,x as d,p as g};
